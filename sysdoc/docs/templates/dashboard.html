<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<meta name="apple-touch-fullscreen" content="yes" />
	<meta name="theme-color" content="#303565">
	<title>Fundação CEFETMINAS</title>

	<!-- CSS -->

	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="/static/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<link href="/static/css/modal.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<link href="/static/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
	<!-- Favicon -->
	<link href="/static/images/favicon.ico" type="image/x-icon" rel="shortcut icon">
	<link rel="manifest" href="/static/manifest.json">
	<link rel="apple-touch-icon" href="/static/images/icons/icon-apple.png">
	<!-- iPhone Xs Max (1242px x 2688px) -->
	<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/images/splashscreens/iphonexsmax_splash.png" type="image/png" />
	<!-- iPhone Xs Max (2688 x 1242) -->
	<link
	      rel="apple-touch-startup-image"
	      media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
	      href="/static/images/splashscreens/splash/Default-Landscape-2688h~iphone.png"
	    />

	<!-- iPhone Xr (828px x 1792px) -->
	<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/images/splashscreens/splash/iphonexr_splash.png" type="image/png" />
	<!-- iPhone X, Xs (1125px x 2436px) -->
	<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/images/splashscreens/iphonex_splash.png" type="image/png"/>
	<!-- iPhone 8 Plus, 7 Plus, 6s Plus, 6 Plus (1242px x 2208px) -->
	<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/images/splashscreens/splash/iphoneplus_splash.png" type="image/png" />
	<!-- iPhone 8, 7, 6s, 6 (750px x 1334px) -->
	<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/images/splashscreens/splash/750x1334.png" type="image/png" />
	<!-- iPhone  1920x1080 -->
	<link
		 rel="apple-touch-startup-image"
		 media="screen and (device-width: 640px) and (device-height: 360px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
		 href="/static/images/splashscreens/1920x1080.png"
	 />
	 <!-- iPhone  1080x2336 -->
	<link
		 rel="apple-touch-startup-image"
		 media="screen and (device-width: 540px) and (device-height: 1168px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
		 href="/static/images/splashscreens/1080x2336.png"
	 />
	 <!-- iPhone  1242x2688 -->
	<link
		 rel="apple-touch-startup-image"
		 media="screen and (device-width: 621px) and (device-height: 1344px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
		 href="/static/images/splashscreens/1242x2688.png"
	 />
		<!-- iPhone  2436x1125 -->
	 <link
			 rel="apple-touch-startup-image"
			 media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
			 href="/static/images/splashscreens/splash/2436h.png"
		/>

		<!-- iPhone  2732x2732 -->
	<link href="/static/images/splashscreens/splash/2732.png" media="(device-width: 1366px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/splash/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/images/splashscreens/splash/iphone6_splash.png"type="image/png" />
	<link href="/static/images/splashscreens/splash/Default~iphone.png" media="(device-width: 160px) and (device-height: 240px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/splash/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/ipadpro3_splash.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
	<link href="/static/images/splashscreens/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image" />
</head>

<body class="default_bg">
	<div class="default_bg_overlay">

		<!-- Menu - Navbar -->

		{%include 'header.html'%}

		<!-- Gráfico -->

		<div class="content">

			<div class="container">

				<div class="row title_margin" id="template_documents">
					<div class="col s12">
						<center>
							<font class="ms_bold title_color" size="6">Dashboard</font>
						</center>
					</div>
				</div>

				<div class="row">
					<div class="col s12">
						<font class="ms_bold title_color" size="4">Tempo de execução médio:</font>
					</div>
				</div>

				<div class="row">
					<div class="col s12">
						<div class="card">
							<canvas id="averageTimePerDay"></canvas>
						</div>
					</div>
				</div>

			</div>

			<div class="push"></div>

		</div>


		<!-- Footer -->

		{% include 'footer.html' %}

		<!-- Script -->

		<script src="/static/js/moment.js"></script>
		<script src="/static/node_modules/chart.js/dist/Chart.js"></script>

		<script type="text/javascript">
			var ctx = document.getElementById("averageTimePerDay").getContext('2d');
			var averageTimePerDay = new Chart(ctx, {
				type: 'line',
				data: {
					datasets: [{
						label: 'Gerar PDFs (s)',
						backgroundColor: 'rgba(255,99,132,1)',
						borderColor: 'rgba(255,99,132,1)',
						data: [
						{%for each in AveragePDFTimePerDay%}
						{x: new Date("{{each.day}}"), y:(new Date("1970-01-01T0{{each.media}}").getTime()-new Date("1970-01-01T00:00:00.0").getTime())/1000},
						{%endfor%}
						],
						borderWidth: 1,
						fill: false,
						yAxisID: 'y-axis-1'
					},
					{
						label: 'Gerar ZIPs (s)',
						backgroundColor: 'rgb(54, 162, 235)',
						borderColor: 'rgb(54, 162, 235)',
						data: [
						{%for each in AverageZIPTimePerDay%}
						{x: new Date("{{each.day}}"), y:(new Date("1970-01-01T0{{each.media}}").getTime()-new Date("1970-01-01T00:00:00.0").getTime())/1000},
						{%endfor%}
						],
						borderWidth: 1,
						fill: false,
						yAxisID: 'y-axis-1'
					},
					{
						label: 'Gerar Backups (s)',
						backgroundColor: 'rgb(153, 102, 255)',
						borderColor: 'rgb(153, 102, 255)',
						data: [
						{%for each in AverageBackupTimePerDay%}
						{x: new Date("{{each.day}}"), y:(new Date("1970-01-01T0{{each.media}}").getTime()-new Date("1970-01-01T00:00:00.0").getTime())/1000},
						{%endfor%}
						],
						borderWidth: 1,
						fill: false,
						yAxisID: 'y-axis-1'
					},
					{
						label: 'Executar Restores (s)',
						backgroundColor: 'rgb(255, 205, 86)',
						borderColor: 'rgb(255, 205, 86)',
						data: [
						{%for each in AverageRestoreTimePerDay%}
						{x: new Date("{{each.day}}"), y:(new Date("1970-01-01T0{{each.media}}").getTime()-new Date("1970-01-01T00:00:00.0").getTime())/1000},
						{%endfor%}
						],
						borderWidth: 1,
						fill: false,
						yAxisID: 'y-axis-1'
					},
					{
						label: 'Número de consultas a PDFs',
						backgroundColor: 'rgb(75, 192, 192)',
						borderColor: 'rgb(75, 192, 192)',
						data: [
						{%for each in Readperday%}
						{x: new Date("{{each.day}}"), y:{{each.acessos}} },
						{%endfor%}
						],
						borderWidth: 1,
						fill: false,
						yAxisID: 'y-axis-2'
					}]
				},
				options: {
					responsive: true,
					tooltips: {
						mode: 'index',
						intersect: false,
					},
					hover: {
						mode: 'nearest',
						intersect: true
					},
					scales: {
						xAxes: [{
							type: 'time',
							time: {
								displayFormats: {
									'millisecond': 'MMM DD',
									'second': 'MMM DD',
									'minute': 'MMM DD',
									'hour': 'MMM DD',
									'day': 'MMM DD',
									'week': 'MMM DD',
									'month': 'MMM DD',
									'quarter': 'MMM DD',
									'year': 'MMM DD',
								},
								unit: 'day'
							}
						}],
						yAxes: [{
							type: 'linear',
							scaleLabel: {
								labelString: 'Tempo de execução médio (s)',
								display: true
							},
							display: true,
							position: 'left',
							id: 'y-axis-1',
						},
						{
							type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
							scaleLabel: {
								labelString: 'Acessos',
								display: true
							},
							display: true,
							position: 'right',
							id: 'y-axis-2',
						}]
					}
				}
			});
		</script>

	</div>
</body>
</html>
